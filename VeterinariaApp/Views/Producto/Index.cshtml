@model IEnumerable<VeterinariaApp.Models.Producto>

@{
    ViewData["Title"] = "Productos | VetClinic Pro";
}

<div class="container-fluid bg-light py-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-primary mb-0">
            <i class="fas fa-box-open me-2"></i> Productos
        </h2>
        <a asp-action="Create" class="btn btn-primary rounded-pill px-3">
            <i class="fas fa-plus me-1"></i> Agregar Producto
        </a>
    </div>

    <p class="text-muted mb-4">Inventario de productos y suministros</p>

    <!-- Grid -->
    <div class="row g-4">
        @foreach (var item in Model)
        {
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <!-- Icon / Image area -->
                    <div class="bg-light d-flex align-items-center justify-content-center rounded-top-4"
                         style="height:140px;">
                        @{
                            var icon = item.Tipo?.ToLower() switch
                            {
                                "medicina" => "fa-pills",
                                "alimento" => "fa-drumstick-bite",
                                "accesorio" => "fa-vest",
                                "juguete" => "fa-bone",
                                _ => "fa-box"
                            };
                        }
                        <i class="fas @icon fa-3x text-primary"></i>
                    </div>

                    <div class="card-body d-flex flex-column">
                        <h6 class="card-title fw-bold mb-1">@item.Nombre</h6>
                        <small class="text-muted mb-2">@item.Tipo</small>

                        <div class="mt-auto">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span class="fw-bold text-primary fs-5">S/. @item.Precio.ToString("0.00")</span>
                                <span class="badge bg-success">@item.Stock unidades</span>
                            </div>

                            <div class="d-flex justify-content-end gap-1">
                                <a asp-action="Edit" asp-route-id="@item.IdProducto"
                                   class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-edit"></i>
                                </a>

                                <a asp-action="Delete" asp-route-id="@item.IdProducto"
                                   class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        <!-- PAGINACIÓN -->
        <nav aria-label="Page navigation" class="mt-4">
            <ul class="pagination justify-content-center">
                <!-- Botón "Anterior" -->
                <li class="page-item @(ViewBag.paginaActual <= 1 ? "disabled" : "")">
                    <a class="page-link" asp-action="Index" asp-route-page="@(ViewBag.paginaActual - 1)">Anterior</a>
                </li>

                <!-- Números de página -->
                @for (int x = 1; x <= ViewBag.totalPaginas; x++)
                {
                    <li class="page-item @(x == ViewBag.paginaActual ? "active" : "")">
                        <a class="page-link" asp-action="Index" asp-route-page="@x">@x</a>
                    </li>
                }

                <!-- Botón "Siguiente" -->
                <li class="page-item @(ViewBag.paginaActual >= ViewBag.totalPaginas ? "disabled" : "")">
                    <a class="page-link" asp-action="Index" asp-route-page="@(ViewBag.paginaActual + 1)">Siguiente</a>
                </li>
            </ul>
        </nav>
    </div>
</div>